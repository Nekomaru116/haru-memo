// utils/tutorialConstants.ts - チュートリアル用定数
//import type {CanvasLine} from '../db/database';

export interface TutorialNoteData {
  text: string;
  x: number;
  y: number;
  color: string;
  id: string; // チュートリアル付箋識別用
}

export interface TutorialLineData {
  points: number[];
  color: string;
  strokeWidth: number;
  tool: 'pen_red' | 'pen_black' | 'eraser';
  id: string; // チュートリアル描画線識別用
  description: string; // 説明（デバッグ用）
}

// 🎯 チュートリアル用付箋データ
export const TUTORIAL_NOTES: TutorialNoteData[] = [
  {
    id: 'tutorial_welcome',
    text: "👋 ようこそ！\n\n【付箋を長押し】\nメニューを表示\n\n【付箋をドラッグ】\n移動\n\n【付箋を2回タップorクリック】\n最前面に移動",
    x: 115,
    y: 120,
    color: 'yellow'
  },
  {
    id: 'tutorial_basic',
    text: "📝 基本操作\n\n【付箋の作成】\n下部に入力\n※改行方法\n（PC）Enter\n（モバイル）キーボードの改行\n\n【キャンバス】\nドラッグで移動\nピンチorホイールで拡大縮小",
    x: 115,
    y: 376,
    color: 'orange'
  },
  {
    id: 'tutorial_createNotes_caution',
    text: "⚠️ 注意点\n・長すぎる文章や多すぎる改行は、付箋が見にくくなってしまう場合があります。",
    x: 115,
    y: 650,
    color: 'orange'
  },
  {
    id: 'tutorial_drawing',
    text: "🎨 描画機能\n\n下部のペンボタンから描画できます",
    x: 330,
    y: 300,
    color: 'green'
  },
  {
    id: 'tutorial_drawing_caution',
    text: '⚠️ 注意点\n【アンドゥ・リドゥ】\nはありません。',
    x: 330,
    y: 437,
    color: 'green'
  },
  {
    id: 'tutorial_features',
    text: "🔍 検索機能\n\n右上の🔍ボタンから付箋を検索できます",
    x: 560,
    y: 300,
    color: 'blue'
  },
  {
    id: 'tutorial_boards',
    text: "🗂️ マルチボード\n\n複数のボードを作成することが出来ます\n\n右上のレイヤーボタンから\nボード選択画面を表示できます",
    x: 815,
    y: 300,
    color: 'purple'
  },
  {
    id: 'tutorial_tutorialEnd',
    text: "🎉チュートリアル終了です。\n\nお疲れ様でした。\nこれらの付箋と描画線は左上のメニュー内の\n\n「全ての付箋を削除」\n「全ての描画を削除」\n\nから削除できます。",
    x: 1070,
    y: 300,
    color: "pink"
  },
  {
  id: 'tutorial_PWARecommends',
  text: '最後に、、、\n\nこのサービスは\n「思いついたアイデアを即座に書き留める」\nことをモットーにしています。\n（特にスマートフォンの場合は）アプリとしてホーム画面に追加することでその性質をより活かせると考えています。\n\nもしよければアプリとしてインストールしてもらえるともっと役立てるハズです！\n\n詳しいインストール方法は\n左上のメニューから\n「このアプリについて」内の「インストール」をタップorクリックしてください。',
  x: 1070,
  y: 550,
  color: 'orange',
  },
  {
  id: 'tutorial_whyApp',
  text: '❓なんでこんなに「アプリ」にこだわるかって？\n\nこのままウェブで利用すると画面が狭いからです🥺（スマホに限る）',
  x: 1380,
  y: 550,
  color: 'yellow',
}
];


export const TUTORIAL_LINES: TutorialLineData[] = [
  // 矢印1: 「ようこそ」→「描画機能」
  {
    id: 'tutorial_arrow_1',
    description: 'ようこそ付箋から描画機能付箋への矢印（水平線）',
    points: [
      261.179, 350.666, 260.956, 350.666, 262.956, 350.666, 265.179, 350.666,
      269.845, 350.888, 271.623, 350.888, 275.401, 351.11, 282.956, 351.11,
      285.845, 351.11, 291.401, 351.11, 293.623, 351.11, 296.512, 351.11,
      299.623, 351.11, 300.956, 351.11, 301.623, 351.11, 301.845, 351.11,
      302.29, 351.11, 303.623, 351.11, 304.734, 351.11, 307.179, 351.11,
      308.29, 351.11, 309.179, 351.11, 309.623, 351.11, 310.512, 351.11,
      310.956, 351.11, 311.401, 351.11, 311.845, 351.11, 312.512, 351.11,
      312.956, 351.11, 313.401, 351.11, 313.623, 351.11, 314.067, 351.11,
      314.29, 351.11, 314.734, 351.11, 315.179, 351.11, 315.401, 351.11,
      315.623, 351.11, 315.845, 351.11, 316.067, 351.11, 316.734, 351.11,
      317.179, 351.11, 317.623, 351.11, 318.067, 351.11, 318.734, 351.11,
      318.956, 351.11, 319.401, 351.11, 319.623, 351.11, 319.845, 351.11,
      320.29, 351.11, 320.512, 351.11
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_1_head',
    description: 'ようこそ→描画機能 矢印の先端',
    points: [
      309.623, 342.443, 310.067, 342.443, 310.956, 342.888, 314.29, 345.11,
      316.067, 346.443, 318.956, 347.999, 320.067, 348.666, 320.734, 349.332,
      321.179, 349.332, 321.401, 349.554, 321.623, 349.554, 321.845, 349.554,
      322.067, 349.554, 322.29, 349.554, 322.29, 349.777, 322.512, 349.999,
      322.734, 350.221, 322.956, 350.221, 322.956, 350.443, 322.734, 350.666,
      322.067, 351.11, 321.179, 351.999, 320.067, 353.11, 318.067, 354.666,
      317.179, 355.332, 315.623, 356.443, 313.623, 358.221, 312.734, 359.11,
      312.29, 359.332, 312.067, 359.777, 311.845, 359.777, 311.845, 359.999,
      311.623, 359.999, 311.623, 360.221, 311.623, 360.443
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_1_shaft',
    description: 'ようこそ→描画機能 矢印の軸',
    points: [
      309.401, 341.554, 309.401, 341.777, 309.401, 342.666, 309.401, 343.999,
      309.401, 345.554, 309.401, 347.110, 309.401, 348.443, 309.401, 350.221,
      309.401, 351.777, 309.401, 352.666, 309.401, 353.777, 309.401, 354.443,
      309.401, 355.554, 309.401, 355.999, 309.401, 356.666, 309.401, 356.888,
      309.401, 357.332, 309.401, 357.554, 309.179, 358.443, 309.179, 358.888,
      309.179, 359.332, 309.179, 359.554, 309.179, 359.777, 309.179, 359.999,
      309.179, 360.221, 309.179, 360.443, 309.179, 359.999, 308.956, 359.110
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  // 矢印2: 「描画機能」→「検索機能」
  {
    id: 'tutorial_arrow_2',
    description: '描画機能→検索機能 矢印の先端',
    points: [
      541.401, 340.443, 540.956, 340.443, 541.179, 340.443, 541.623, 341.11,
      542.512, 341.999, 543.623, 343.332, 544.956, 344.666, 547.179, 346.666,
      547.845, 347.11, 549.179, 347.999, 550.29, 348.666, 550.512, 348.666,
      550.512, 348.888, 550.734, 348.888, 550.956, 348.888, 551.401, 349.11,
      551.623, 349.332, 551.845, 349.332, 551.845, 349.554, 551.401, 349.777,
      550.956, 350.221, 550.067, 351.11, 547.623, 353.11, 545.623, 354.666,
      543.179, 356.666, 542.067, 357.554, 541.623, 357.999
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_2_tail',
    description: '描画機能→検索機能 矢印の尾部',
    points: [
    495.844, 350.057, 495.844, 350.057, 497.511, 350.057, 501.177, 350.057,
    507.511, 350.057, 515.844, 350.057, 523.511, 350.057, 529.844, 350.057,
    534.844, 350.057, 537.511, 350.057, 539.511, 350.057, 541.177, 350.057,
    542.511, 350.057, 543.844, 350.057, 544.844, 350.057, 545.511, 350.057,
    545.844, 350.057, 545.844, 350.057
  ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_2_shaft',
    description: '描画機能→検索機能 矢印の軸',
    points: [
      540.734, 339.554, 540.734, 339.332, 540.512, 339.332, 540.512, 339.554,
      540.29, 339.999, 540.29, 341.11, 540.29, 343.554, 540.067, 345.11,
      540.067, 346.666, 540.067, 348.221, 540.067, 349.332, 540.067, 350.221,
      539.845, 350.666, 539.845, 350.888, 539.845, 351.332, 539.845, 351.999,
      539.845, 353.11, 539.623, 353.554, 539.623, 354.221, 539.623, 354.666,
      539.401, 355.332, 539.401, 355.999, 539.401, 356.443, 539.401, 356.666,
      539.401, 356.888, 539.401, 357.11, 539.401, 357.332, 539.401, 357.554,
      539.401, 357.11, 540.067, 355.777
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  
  // 矢印3: 「検索機能」→「マルチボード」
  {
    id: 'tutorial_arrow_3',
    description: '検索機能→マルチボード 矢印（水平線）',
    points: [
      747.623, 349.554, 746.956, 349.11, 747.178, 349.11, 748.956, 349.11,
      760.29, 349.11, 770.512, 349.11, 784.512, 349.11, 786.29, 349.332,
      788.734, 349.554, 789.623, 349.777, 789.845, 349.554
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_3_head',
    description: '検索機能→マルチボード 矢印の先端',
    points: [
      778.512, 339.999, 777.845, 339.999, 778.512, 340.221, 780.734, 341.554,
      782.067, 341.999, 784.512, 343.332, 787.845, 345.332, 788.956, 345.999,
      791.401, 347.11, 792.29, 347.777, 792.734, 347.999, 792.956, 347.999,
      792.734, 348.221, 792.512, 348.443, 791.623, 349.332, 790.067, 350.888,
      788.29, 352.666, 784.956, 355.777, 784.067, 356.221, 783.845, 356.443
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_3_tail',
    description: '検索機能→マルチボード 矢印の尾部',
    points: [
      778.734, 340.221, 778.734, 340.443, 778.734, 341.999, 778.734, 343.999,
      778.956, 347.11, 778.956, 352.666, 778.956, 355.999, 778.956, 359.554,
      778.956, 360.666, 778.956, 360.888, 778.956, 360.666, 778.956, 360.443,
      779.178, 360.221, 779.401, 359.777, 780.29, 359.11, 780.956, 358.221,
      782.067, 357.332, 783.178, 356.666, 784.512, 355.777, 784.734, 355.332,
      784.956, 355.332, 785.178, 355.777
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  
  // 矢印4: 「マルチボード」→「チュートリアル終了」
  {
    id: 'tutorial_arrow_4',
    description: 'マルチボード→チュートリアル終了 矢印（水平線）',
    points: [
      988.734, 350.221, 988.29, 349.999, 990.29, 349.777, 996.512, 349.554,
      1011.623, 348.666, 1021.623, 347.777, 1034.29, 347.332, 1039.845, 347.332,
      1042.734, 347.332, 1044.067, 347.554, 1044.067, 347.777, 1044.29, 347.777,
      1044.29, 347.554, 1044.067, 347.332
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_4_head',
    description: 'マルチボード→チュートリアル終了 矢印の先端',
    points: [
      1027.623, 337.554, 1028.067, 337.777, 1029.178, 338.221, 1031.623, 339.332,
      1035.178, 340.666, 1038.734, 342.221, 1042.956, 344.221, 1044.734, 345.11,
      1045.623, 345.777, 1045.845, 345.777, 1045.845, 345.999, 1044.956, 346.666,
      1043.401, 348.221, 1042.29, 349.11, 1036.956, 352.888, 1035.623, 353.777,
      1033.178, 354.888, 1030.956, 355.777, 1030.956, 355.999, 1031.178, 355.999
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_arrow_4_tail',
    description: 'マルチボード→チュートリアル終了 矢印の尾部',
    points: [
      1027.623, 336.443, 1027.623, 340.443, 1027.401, 345.999, 1027.178, 347.999,
      1027.178, 351.332, 1027.178, 354.888, 1027.178, 355.999, 1027.178, 356.443,
      1027.178, 356.221, 1027.178, 355.777
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  
  // 装飾：チュートリアル終了付箋の左上の二重丸
  {
    id: 'tutorial_decoration_circle',
    description: 'チュートリアル終了付箋左上の二重丸',
    points: [
      1073.246, 321.027, 1065.015, 323.174, 1062.152, 323.89, 1053.562, 323.174,
      1047.836, 319.237, 1042.826, 311.364, 1041.394, 301.343, 1046.762, 288.101,
      1055.352, 279.153, 1067.878, 270.922, 1088.278, 266.627, 1094.362, 267.343,
      1105.457, 280.943, 1103.309, 291.68, 1096.151, 301.700, 1086.846, 310.648,
      1082.194, 314.227, 1072.531, 317.806, 1069.667, 316.732, 1068.236, 313.153,
      1071.457, 304.922, 1078.615, 300.627, 1085.415, 299.195, 1087.204, 300.627,
      1087.562, 303.49, 1085.415, 306.711
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  
  // 装飾：二重丸の左上の3本線（放射線）
  {
    id: 'tutorial_decoration_line1',
    description: '二重丸左上の放射線1',
    points: [
      1037.099, 260.185, 1038.889, 261.617, 1040.32, 263.048, 1043.184, 266.269,
      1047.836, 271.28
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_decoration_line2',
    description: '二重丸左上の放射線2',
    points: [
      1061.436, 246.227, 1061.794, 250.164, 1062.152, 251.954, 1064.299, 257.322
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  },
  {
    id: 'tutorial_decoration_line3',
    description: '二重丸左上の放射線3',
    points: [
      1091.499, 246.227, 1089.351, 250.164, 1087.92, 254.459, 1085.773, 264.48
    ],
    color: '#dc2626',
    strokeWidth: 2,
    tool: 'pen_red'
  }
];


// 🎯 チュートリアル付箋の識別用ID一覧
export const TUTORIAL_NOTE_IDS = TUTORIAL_NOTES.map(note => note.id);

// 🎯 チュートリアル完了判定
export const isTutorialCompleted = (existingNoteIds: string[]): boolean => {
  // チュートリアル付箋がすべて削除されていれば完了
  return !TUTORIAL_NOTE_IDS.some(tutorialId => 
    existingNoteIds.some(existingId => existingId.includes(tutorialId))
  );
};